{% extends 'base.html' %}

{% block header %}
  <div class="d-flex justify-content-between align-items-center">
    <h1 class="m-0">{% block title %}Files{% endblock %}</h1>

  </div>
{% endblock %}

{% block content %}

  {% macro render_tree(nodes) %}
    <ul>
      {% for node in nodes %}
        <li>
          {% if node.type == 'dir' %}
            <strong>{{ node.name }}</strong>

            {% if node.children %}
              {{ render_tree(node.children) }}
            {% endif %}

          {% else %}
            <a href="{{ url_for('pages.download', filename=node.path) }}">
              {{ node.name }}
            </a>
          {% endif %}
        </li>
      {% endfor %}
    </ul>
  {% endmacro %}

  <div>
    {% if files %}
      {{ render_tree(files) }}
    {% else %}
      <p class="text-body-secondary">
        There are no files in the uploads directory yet.
      </p>
    {% endif %}
  </div>
{% endblock %}